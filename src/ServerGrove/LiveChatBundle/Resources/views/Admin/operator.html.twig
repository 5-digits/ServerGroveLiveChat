{% extends "ServerGroveLiveChatBundle::admin-layout.html.twig" %}

{% block h1 %}Operator{% endblock %}

{% block content %}
{% set route = operator.getId() ? 'sglc_admin_operator_edit' : 'sglc_admin_operator' %}
{% set vars = operator.getId() ? {'id': operator.getId()} : {} %}

<script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery(':text:first').focus();
        jQuery('form').submit(function() {
            if (jQuery('#passwordEnabler').length > 0 && jQuery(':password[disabled]').length == 0 && jQuery(':password:first').val().trim().length == 0) {
                alert('Password cannot be empty');
                return false;
            }

            return true;
        });
    });
</script>

<form action="{{ path(route, vars) }}" method="post" class="form-horizontal">
    {% if operator.getId() %}
    <legend>Edit operator "{{operator.getName()}}"</legend>
    {% else %}
    <legend>Add new operator</legend>
    {% endif %}

    {{ form_widget(form) }}

    <div class="form-actions">
        <button class="btn btn-primary" type="submit">Submit</button>
        <a class="btn" href="{{ path('sglc_admin_operators') }}">Cancel</a>
    </div>
</form>
{% endblock %}
